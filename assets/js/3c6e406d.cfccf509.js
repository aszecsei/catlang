"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[570],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),i=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=i(e.components);return r.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=i(n),f=a,m=d["".concat(c,".").concat(f)]||d[f]||p[f]||o;return n?r.createElement(m,l(l({ref:t},u),{},{components:n})):r.createElement(m,l({ref:t},u))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,l[1]=s;for(var i=2;i<o;i++)l[i]=n[i];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4625:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>f,frontMatter:()=>s,metadata:()=>i,toc:()=>p});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),l=["components"],s={id:"structs",title:"Structs",sidebar_label:"Structs"},c=void 0,i={unversionedId:"structs",id:"structs",title:"Structs",description:"Defining a Struct",source:"@site/docs/structs.md",sourceDirName:".",slug:"/structs",permalink:"/catlang/docs/structs",draft:!1,editUrl:"https://github.com/aszecsei/catlang/edit/master/website/docs/structs.md",tags:[],version:"current",frontMatter:{id:"structs",title:"Structs",sidebar_label:"Structs"},sidebar:"docs",previous:{title:"Functions",permalink:"/catlang/docs/functions"},next:{title:"Unions",permalink:"/catlang/docs/unions"}},u={},p=[{value:"Defining a Struct",id:"defining-a-struct",level:2},{value:"Attributes",id:"attributes",level:2}],d={toc:p};function f(e){var t=e.components,n=(0,a.Z)(e,l);return(0,o.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"defining-a-struct"},"Defining a Struct"),(0,o.kt)("p",null,"Catlang's syntax for defining structures is straightforward:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-catlang"},"struct Vector3 {\n  x: float;\n  y: float;\n  z: float;\n}\n")),(0,o.kt)("p",null,"Structs can also have default values assigned:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-catlang"},"struct Vector3 {\n  x: float = 1.0;\n  y: float = 1.0;\n  z: float = 1.0;\n}\n")),(0,o.kt)("p",null,'To denote an "owned" pointer in a struct, use the ',(0,o.kt)("inlineCode",{parentName:"p"},"owned")," keyword. When a struct is deleted, all owned pointers are also deleted."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-catlang"},"struct Transform {\n  owned position: *Vector3;\n  owned rotation: *Quaternion;\n}\n")),(0,o.kt)("p",null,"To allocate memory on the stack, users should declare variables ",(0,o.kt)("em",{parentName:"p"},"without")," the ",(0,o.kt)("inlineCode",{parentName:"p"},"new")," keyword. If the ",(0,o.kt)("inlineCode",{parentName:"p"},"new")," keyword is used, the variable is allocated on the heap and must be freed later with the ",(0,o.kt)("inlineCode",{parentName:"p"},"delete")," keyword."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-catlang"},"const v1 = Vector3; // Allocated on the stack.\nconst v2 = new Vector3; // Allocated on the heap...\ndelete v2; // ...so must be manually freed.\n")),(0,o.kt)("p",null,'Structs can define how they are stored in arrays, in order to reduce cache misses. Structs default to the "array of structs" schema, but can be swapped to the "struct of arrays" schema using the ',(0,o.kt)("inlineCode",{parentName:"p"},"SOA")," attribute."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-catlang"},"struct V3A {\n  x : float = 1;\n  y : float = 2;\n  z : float = 3;\n}\nlet v1 = [4]V3A; // Memory will contain 1 2 3 1 2 3 1 2 3 1 2 3\n\n#[SOA]\nstruct V3B {\n  x : float = 1;\n  y : float = 2;\n  z : float = 3;\n}\nlet v2 = [4]V3B; // Memory will contain 1 1 1 1 2 2 2 2 3 3 3 3\n")),(0,o.kt)("p",null,"No matter how these arrays are stored in memory, they are used and referenced the same way within Catlang code."),(0,o.kt)("p",null,"Fields of a struct that begin with an underscore are private fields and are only accessible to functions within the struct's namespace. All other fields are public."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-catlang"},"struct MyStruct {\n  _hiddenVar: string;\n  publicVar: string;\n}\n")),(0,o.kt)("h2",{id:"attributes"},"Attributes"),(0,o.kt)("p",null,"Attributes are built-in language features. Future support for custom attributes may be added in future. They modify the value defined immediately afterwards:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-catlang"},"#[SOA]\nstruct V3 {\n  x : float = 1;\n  y : float = 2;\n  z : float = 3;\n}\n")))}f.isMDXComponent=!0}}]);